(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sys_config-edit"],{"2ecb":function(e,a,t){"use strict";t.d(a,"b",(function(){return o})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){return n}));var n={uniForms:t("ee09").default,uniFormsItem:t("1c3b").default,uniEasyinput:t("0420").default,uniDataCheckbox:t("8d94").default},o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"uni-container"},[t("uni-forms",{ref:"form",attrs:{value:e.formData,validateTrigger:"bind"}},[t("uni-forms-item",{attrs:{name:"domain_name",label:"模块名称",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"模块名称"},model:{value:e.formData.domain_name,callback:function(a){e.$set(e.formData,"domain_name",a)},expression:"formData.domain_name"}})],1),t("uni-forms-item",{attrs:{name:"section_name",label:"功能名称",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"功能名称"},model:{value:e.formData.section_name,callback:function(a){e.$set(e.formData,"section_name",a)},expression:"formData.section_name"}})],1),t("uni-forms-item",{attrs:{name:"key_name",label:"配置项名称",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"类似input框ID,找这个数据的标识 不可重复"},model:{value:e.formData.key_name,callback:function(a){e.$set(e.formData,"key_name",a)},expression:"formData.key_name"}})],1),t("uni-forms-item",{attrs:{name:"key_label",label:"配置项说明"}},[t("uni-easyinput",{attrs:{placeholder:"配置项说明 类似input框对应的label"},model:{value:e.formData.key_label,callback:function(a){e.$set(e.formData,"key_label",a)},expression:"formData.key_label"}})],1),t("uni-forms-item",{attrs:{name:"key_value",label:"配置项值"}},[t("uni-easyinput",{attrs:{placeholder:"配置项值"},model:{value:e.formData.key_value,callback:function(a){e.$set(e.formData,"key_value",a)},expression:"formData.key_value"}})],1),t("uni-forms-item",{attrs:{name:"key_text",label:"配置项描述"}},[t("uni-easyinput",{attrs:{placeholder:"配置项值对应的文本描述"},model:{value:e.formData.key_text,callback:function(a){e.$set(e.formData,"key_text",a)},expression:"formData.key_text"}})],1),t("uni-forms-item",{attrs:{name:"sort",label:"排序"}},[t("uni-easyinput",{attrs:{placeholder:"菜单序号（越大越靠后）",type:"number"},model:{value:e.formData.sort,callback:function(a){e.$set(e.formData,"sort",a)},expression:"formData.sort"}})],1),t("uni-forms-item",{attrs:{name:"can_delete",label:"能删"}},[t("uni-data-checkbox",{attrs:{localdata:e.formOptions.can_delete_localdata},model:{value:e.formData.can_delete,callback:function(a){e.$set(e.formData,"can_delete",a)},expression:"formData.can_delete"}})],1),t("uni-forms-item",{attrs:{name:"memo",label:"描述"}},[t("uni-easyinput",{attrs:{placeholder:"描述"},model:{value:e.formData.memo,callback:function(a){e.$set(e.formData,"memo",a)},expression:"formData.memo"}})],1),t("v-uni-view",{staticClass:"uni-button-group"},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.submit.apply(void 0,arguments)}}},[e._v("提交")]),t("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[e._v("返回")])],1)],1)],1)],1)},i=[]},3263:function(e,a,t){"use strict";(function(e){var n=t("4ea4");t("caad"),t("d3b7"),t("2532"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(t("5530")),i=t("60c9"),r=e.database(),l=(r.command,"sys_config");function u(e){var a={};for(var t in i.validator)e.includes(t)&&(a[t]=i.validator[t]);return a}var s={data:function(){return{formData:{domain_name:"",section_name:"",key_name:"",key_label:"",key_value:"",key_text:"",sort:null,can_delete:1,memo:""},formOptions:{can_delete_localdata:[{text:"否",value:0},{text:"是",value:1},{text:"禁用",value:2}]},rules:(0,o.default)({},u(["domain_name","section_name","key_name","key_label","key_value","key_text","sort","can_delete","memo"]))}},onLoad:function(e){var a=e.id;this.formDataId=a,this.getDetail(a)},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{submit:function(){var e=this;uni.showLoading({mask:!0}),this.$refs.form.submit().then((function(a){e.submitForm(a)})).catch((function(e){uni.hideLoading()}))},submitForm:function(e){var a=this;r.collection(l).doc(this.formDataId).update(e).then((function(e){uni.showToast({title:"修改成功"}),a.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(e){uni.showModal({content:e.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))},getDetail:function(e){var a=this;uni.showLoading({mask:!0}),r.collection(l).doc(e).get().then((function(e){var t=e.result.data[0];t&&(a.formData=t)})).catch((function(e){uni.showModal({content:e.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};a.default=s}).call(this,t("a9ff")["default"])},"60c9":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.enumConverter=a.validator=void 0;var n={domain_name:{rules:[{required:!0},{format:"string"}],label:"模块名称"},section_name:{rules:[{required:!0},{format:"string"}],label:"功能名称"},key_name:{rules:[{required:!0},{format:"string"}],label:"配置项名称"},key_label:{rules:[{format:"string"}],label:"配置项说明"},key_value:{rules:[{format:"string"}],label:"配置项值"},key_text:{rules:[{format:"string"}],label:"配置项描述"},sort:{rules:[{format:"int"}],label:"排序"},can_delete:{rules:[{format:"int"},{range:[{text:"否",value:0},{text:"是",value:1},{text:"禁用",value:2}]}],defaultValue:1,label:"能删"},memo:{rules:[{format:"string"}],label:"描述"}};a.validator=n;var o={can_delete_valuetotext:{0:"否",1:"是",2:"禁用"}};a.enumConverter=o},a9e2:function(e,a,t){"use strict";t.r(a);var n=t("2ecb"),o=t("cd4e");for(var i in o)"default"!==i&&function(e){t.d(a,e,(function(){return o[e]}))}(i);var r,l=t("f0c5"),u=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);a["default"]=u.exports},cd4e:function(e,a,t){"use strict";t.r(a);var n=t("3263"),o=t.n(n);for(var i in n)"default"!==i&&function(e){t.d(a,e,(function(){return n[e]}))}(i);a["default"]=o.a}}]);